{FILTRO_MODAL}

{MODAL_EXCLUIR}

<body>
    <div id="wrapper">
        <div id="page-wrapper">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-12">
                        <p>
                        {ALERTA}

                        {BREADCRUMBS}
                        
                        <div class="panel panel-default">
                            <div class="panel-heading clearfix">                                  
                                <h3 class="panel-title"><strong>{NOME_LISTA}</strong></h3>
                            </div>                           
                        <div class="panel-body">    
                            <form class="form-inline">
                                <label>Linhas                                    
                                    <select id="selectNrLinhas" class="form-control input-sm">
                                        {LISTA_NRLINHAS}                                        
                                    </select>                                    
                                </label>                                
                                <a class="btn btn-success pull-right" href="{LINK_INCLUIR}">Incluir</a>
                                <button type="button" class="btn btn-info pull-right" style="margin-right: 5px; margin-bottom: 10px;" data-toggle="modal" data-target="#myModal">Filtrar</button>
                            </form>
                            
                            <table class="table table-striped table-bordered table-hover table-condensed tablesorter" id="myTable">    
                            <thead>
                                {TABELA_TITULOS}
                            </thead>            
                            <tbody> 
                                <!-- BEGIN BLOCK_REGISTROS -->
                                <tr>                        
                                    {TABELA_CAMPOS}                     
                                    <td>
                                        <a class="btn btn-warning btn-xs" href="{LINK_EDITAR}">Editar</a>                       
                                        <a href="#" class="confirm-delete btn btn-danger btn-xs" data-href="{LINK_EXCLUIR}" data-toggle="modal" data-target="#confirm-delete" data-id="{REG_ID}">Excluir</a>    
                                    </td>
                                </tr>           
                                <!-- END BLOCK_REGISTROS -->
                            </tbody>    
                            </table>

                            {TXT_REGISTROS}     

                            {PAGINACAO}
                        </div>
                    </div>
                </div>                
            </div>            
        </div>        
    </div>    
</body>

<script type="text/javascript">
    $('#myTable th').click(function() {
        var nome = $(this).attr("id");

        if (nome == 'actions') return;

        var desc = $(this).attr("data_aux");
        
        if (desc == 'DESC') {
            desc = "ASC"
        } else {
            desc = "DESC"
        };
        $(this).attr("data_aux", desc);

        var nLinhas = $('#selectNrLinhas').val();        

        $.ajax({
            url: '/TESTE/SaveSession.php',
            type: 'GET',
            dataType: 'json',
            data: {_linhas: nLinhas, _orderBy: nome, _orderAD: desc},
        })
        .done(function(dados) {
            /*console.info(dados);
            var tbody = $('#myTable').find('tbody');
            tbody.find('tr').remove();
            $.each(dados, function(index, val) 
            {
                 var tr = '<tr>';
                 tr += '<td>'+val.ID+'</td>';
                 tr += '<td>'+val.Nome+'</td>';
                 tr += '<td>actions</td>';
                 tr += '</tr>';                 
                 
                 tbody.append(tr);                

                 console.info(tbody);
                 console.info(val);
                 console.info(tr);                 
            });*/
            location.reload();
        })        
        .fail(function(jqXHR, textStatus, errorThrown) {
            console.info(jqXHR);
            console.info(textStatus);
            console.info(errorThrown);
        })
        .always(function() {
            console.log("complete");
        });
    });
</script>

<script>
    $('#confirm-delete').on('show.bs.modal', function(e) {
        $(this).find('.btn-ok').attr('href', $(e.relatedTarget).data('href'));        
    });
</script>